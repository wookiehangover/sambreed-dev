---
export interface Props {
	exclude?: string;
}
import { getCollection } from "astro:content";
import BlogCard from "../search/BlogCard.astro";
const exclude = Astro.props.exclude ?? "";
const posts = (await getCollection("writing"))
	.filter((post) => post.id !== exclude)
	.sort((a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf())
	.slice(0, 6);
---

<section>
	<header>
		<h2>“Blog”</h2>
	</header>
	<div>
		<ul>
			{
				posts.map((post) => (
					<li>
						<a href={`/writing/${post.id}`}>
							<p>{post.data.title}</p>

							<p class="text-dim text-xs">
								<time class="font-mono text-xs">
									{new Date(post.data.pubDate).toLocaleDateString("en-us", {
										year: "numeric",
										month: "2-digit",
										day: "2-digit",
									})}
								</time>
								<span>&middot;</span>
								{post.data.description}
							</p>
						</a>
					</li>
				))
			}
		</ul>
		<p><a href="/writing" class="text-sm">→ more</a></p>
	</div>
</section>

<style>
	ul {
		/* list-style-type: none; */
		/* margin: 2rem 0; */
		padding: 0;

		/* display: grid; */
		/* grid-template-columns: 1fr 1fr; */
		/* gap: 1rem; */

		li {
			display: flex;
			margin: 1rem 0;
			/* font-size: 0.875rem; */

			a {
				text-decoration: none;
				color: var(--text-color);
				> * {
					margin: 0;
				}
			}
		}
	}

	div > p > a {
		text-decoration: none;
		color: var(--text-color);
	}

	@media screen and (max-width: 512px) {
		ul {
			grid-template-columns: 1fr;
		}
	}
</style>
