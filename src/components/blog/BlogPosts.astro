---
export interface Props {
	exclude?: string;
}
import { getCollection } from "astro:content";
import BlogCard from "../search/BlogCard.astro";
const exclude = Astro.props.exclude ?? "";
const posts = (await getCollection("writing"))
	.filter((post) => post.id !== exclude)
	.sort((a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf())
	.slice(0, 4);
---

<section>
  <header>
    <h2>“Blog”</h2>
  </header>
  <div>
    <ul>
      {
        posts.map((post) => (
          <li>
            <BlogCard entry={post} />
          </li>
        ))
      }
    </ul>
    <p><a href="/writing">→ more</a></p>
  </div>
</section>

<style>
  .recent {
    display: flex;
    gap: 2rem;
    flex-direction: row;
  }
  ul {
    list-style-type: none;
    margin: 2rem 0;
    padding: 0;

    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;

    li {
      display: flex;
    }
  }

  div > p > a {
    text-decoration: none;
    color: var(--text-color);
  }
</style>